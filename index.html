<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Machine Repair Log</title>
    
    <link rel="stylesheet" href="styles.css">

</head>
<body>
    <!-- Developer Signature -->
    <div class="developer-signature">
        <span class="dev-text">Developed by</span> <span class="name-text">DANIIL RITENKO</span>
    </div>

    <div id="pin-overlay">
        <div style="
            background-color: #fff;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
            text-align: center;
            width: 80%;
            max-width: 350px;
        ">
            <h2 id="pin-header-text">Enter PIN</h2>
            <input type="password" id="pin-input" placeholder="••••" maxlength="4" inputmode="numeric" pattern="[0-9]*">
            <button id="pin-submit">Access App</button>
            <p id="pin-message"></p>
        </div>
    </div>

    <div id="greeting-overlay">
        <div style="
            background-color: #4CAF50;
            color: white;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.7);
            text-align: center;
            width: 80%;
            max-width: 400px;
            font-size: 2.5em;
            font-weight: bold;
        ">
            <span id="greeting-text">Hello Mechanic!</span>
        </div>
    </div>

    <div id="confirmation-overlay">
        <div class="confirmation-box">
            <span class="checkmark">&#10003;</span>
            <p id="confirmation-message">Thank you for your submission!</p>
        </div>
    </div>

    <div class="container">
        <button id="logoutButton" class="logout-button">Logout</button>
        
        <h1>Machine Repair Log</h1>
        
        <!-- Static Date, Time and Mechanic Display -->
        <div class="info-display">
            <div class="mechanic-info">
                <span class="mechanic-label">Welcome: </span><span id="current-mechanic"></span>
            </div>
            <div class="date-time-info">
                <span class="date-label">Date: </span><span id="current-date"></span>
                <span class="time-label">Time: </span><span id="current-time"></span>
            </div>
        </div>

        <!-- Session Status Reminder -->
        <div id="session-reminder" class="session-reminder" style="display: none;">
            You're still in the system, don't forget to log out!
        </div>
        
        <form id="repairForm">
            <!-- Hidden fields for data that was previously in form -->
            <input type="hidden" id="date" name="date">
            <input type="hidden" id="mechanicName" name="mechanicName">
            <input type="hidden" id="timeStartedMachine" name="timeStartedMachine">
            
            <!-- Removed Date, Mechanic Name, and Log Time fields -->
            
           

            <div class="form-row">
                <div class="form-group half-width">
                    <label for="machineNum">Machine #:</label>
                    <select id="machineNum" name="machineNum" required>
                        <option value="">Select Machine</option>
                        </select>
                </div>

                <div class="form-group half-width">
                    <label for="status">Status:</label>
                    <select id="status" name="status" required>
                        <option value="">Select Status</option>
                        <option value="Fixed">Fixed</option>
                        <option value="Need Further Repair">Need Further Repair</option>
                        <option value="UNRESOLVED">UNRESOLVED</option>
                        <option value="Shop">Shop</option>
                    </select>
                </div>
            </div>

            <div class="form-group">
                <label for="issue">Issue:</label>
                <select id="issue" name="issue" required>
                    <option value="">Select Issue</option>
                    </select>
            </div>

            <div class="form-group" id="descriptionGroup">
                <label for="description">Description (related to issue):</label>
                <textarea id="description" name="description" rows="3" placeholder="Describe the issue in detail..." required></textarea>
            </div>

            <div class="form-group">
                <label for="actionTaken">Action Taken:</label>
                <textarea id="actionTaken" name="actionTaken" rows="4" placeholder="Describe the actions taken to fix the machine..." ></textarea>
            </div>

            <div class="form-group">
                <label for="mechanicNotes">Mechanic Notes (Optional):</label>
                <textarea id="mechanicNotes" name="mechanicNotes" rows="3" placeholder="Enter any notes or parts needed here..."></textarea>
            </div>

            <button type="submit" class="submit-button">Submit Repair</button>
            <div id="message" class="message"></div>
        </form>
    </div>
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getFirestore, collection, addDoc, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyAdc9STb-EImui0DGhuteY8okGKWAMnpJE",
  authDomain: "machinerepairlogsapp.firebaseapp.com",
  projectId: "machinerepairlogsapp",
  storageBucket: "machinerepairlogsapp.firebasestorage.app",
  messagingSenderId: "933593286710",
  appId: "1:933593286710:web:b257aa07e4a2a7d0cc7097",
  measurementId: "G-BXNYDQ56KC"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

// Make Firestore functions accessible in other scripts
  window.db = db;
  window.doc = doc;
  window.getDoc = getDoc;
  window.collection = collection;
  window.addDoc = addDoc;
</script>
    <script src="script.js"></script>

</body>
</html>